---
title: О Robonomics ROS 2 Wrapper
contributors: [Fingerling42]
tools:   
  - Ubuntu 22.04.4
    https://releases.ubuntu.com/jammy/
  - ROS 2 Humble
    https://docs.ros.org/en/humble/Installation.html
  - IPFS Kubo 0.26.0
    https://docs.ipfs.tech/install/command-line/
  - Python 3.10.12
    https://www.python.org/downloads/
---

**В этой статье вы узнаете о пакете Robonomics ROS 2 Wrapper, который позволяет использовать все функции парачейна Robonomics для любого совместимого с ROS 2 робота.**

Идея пакета заключается в обертывании API парачейна Robonomics, предоставленного [robonomics-interface](https://github.com/airalab/robonomics-interface), в узлы ROS 2. Цель состоит в предоставлении разработчикам ROS 2 удобного способа интеграции их роботов или устройств с функциями парачейна. Логика интеграции робототехнического устройства заключается в создании для него уникального адреса в парачейне Robonomics, который используется для управления устройством или получения его телеметрии.

Доступные функции включают:

* **Функция запуска** — запуск устройства для выполнения любой команды с указанным набором параметров, передаваемых в виде строки или файла.
* **Функция журнала данных** — публикация данных устройствателеметрия в виде хэша на парачейн.
* **Использование подписки Robonomics** — возможность отправлять транзакции без комиссии.
* **Безопасное хранение файлов** — для упаковки и распаковки данных используется [InterPlanetary File System](https://ipfs.tech/), который позволяет получать доступ к файлам по их уникальному хэшу. Для удобного использования IPFS включена поддержка [Pinata](https://www.pinata.cloud/), что позволяет закреплять файлы IPFS для быстрой загрузки.
* **Шифрование и дешифрование файлов** — защита файлов с помощью шифрования открытым ключом.

В настоящее время обертка доступна в [реализации на Python](https://github.com/airalab/robonomics-ros2/).

## Архитектура обертки

С архитектурной точки зрения обертка состоит из рабочего узла (с необходимыми темами и сервисами) и базового класса узла, который можно использовать для ваших конкретных роботов.

{% roboWikiPicture {src:"docs/robotics/robonomics-ros2-wrapper.png", alt:"Архитектура обертки ROS 2"} %}{% endroboWikiPicture %}

* `robonomics_ros2_pubsub` — уникальный узел для каждого робота, который служит точкой входа в Web3. Он оборачивает сервисы для отправки журналов данных и получения запусков через Robonomics, а также позволяет загружать/скачивать файлы в IPFS. Этот узел настраивается с помощью специального файла, описанного ниже. Принадлежность узла к конкретному роботу может бытьуказанный через пространство имен ROS.
* `robonomics_ros2_robot_handler` — узел, специфичный для робота, основанный на базовом классе `basic_robonomics_handler` для координации публикации-подписки и робота. Он обрабатывает запуски и решает, когда отправлять журналы данных для управления роботом.

## Установка оболочки

Для работы с оболочкой вам понадобится следующее программное обеспечение:

* Дистрибутив ОС Linux (обычно Ubuntu)
* Дистрибутив ROS 2
* Узел IPFS
* Python 3 (для Python-реализации оболочки)

Пожалуйста, следуйте инструкции по установке, доступной [здесь](https://github.com/airalab/robonomics-ros2/?tab=readme-ov-file#getting-started) и проверьте необходимые версии программного обеспечения. После загрузки необходимых компонентов вам потребуется [построить](https://github.com/airalab/robonomics-ros2/?tab=readme-ov-file#installation-and-building) оболочку как обычный пакет ROS 2 с использованием утилиты `colcon`.

## Настройка подключений к облаку Web3

Перед запуском оболочки вам необходимо настроить, как именно ваш робот будет подключаться к децентрализованному облаку Robonomics и поддерживающим его службам Web3. Для этого вам нужно отредактировать файл конфигурации под названием `robonomics_pubsub_params_template.yaml`, который должен быть уникальным для каждого запущенного робота, который должен получить доступ к Robonomics.

Файл содержит следующие поля конфигурации:

| Поле                 | Описание                                                                                                |
|-----------------------|------------------------------------------------------------------------------------------------------------|
| account_seed          | Семя учетной записи паракаина Robonomics                                                                   |
| crypto_type           | Тип вашей учетной записи, `ED25519` или `SR25519`                                                           |
| remote_node_url       | URL узла Robonomics, по умолчанию `wss://kusama.rpc.robonomics.network`, для локального узла `ws://127.0.0.1:9944`|
| rws_owner_address     | Адрес владельца подписки Robonomics для использования модуля RWS                                           |
| ipfs_dir_path         | Путь к каталогу, содержащему файлы IPFS                                                                   |
| ipfs_gateway          | Шлюз IPFS для загрузки файлов, например, `https://ipfs.io`                                                 |
| pinata_api_key        | Ключ API от [Pinata](https://www.pinata.cloud/), сервиса закрепления для IPFS                               |
| pinata_api_secret_key | Секретный ключ API от [Pinata](https://www.pinata.cloud/), сервиса закрепления для IPFS                    |

Для создания учетной записи на паракаине Robonomics, пожалуйста, воспользуйтесь [следующим руководством](https://wiki.robonomics.network/docs/create-account-in-dapp/) на нашем вики. Обратите внимание на тип создаваемой учетной записи, поскольку учетные записи типа SR25519 не могут использовать шифрование файлов.

{% roboWikiNote {type: "warning", title: "Предупреждение"}%}

  Фраза-семя является конфиденциальной информацией, которая позволяет любому человекуИспользуйте свой аккаунт. Убедитесь, что вы не загружаете файл конфигурации на GitHub или куда-либо еще.
{% endroboWikiNote %}

Обратите внимание на поле `remote_node_url`, так как оно позволяет вам выбрать способ подключения к парачейну Robonomics, включая локальное подключение. Вы можете развернуть свой локальный экземпляр Robonomics для тестирования и разработки. Инструкции по этому доступны в [этой статье](https://wiki.robonomics.network/docs/run-dev-node/) на нашем вики.

Если у вас есть подписка Robonomics, позволяющая вам отправлять транзакции без комиссий, пожалуйста, вставьте адрес владельца подписки в поле `rws_owner_address`. Не забудьте, что ваш аккаунт должен быть добавлен к вашей подписке. Инструкции по активации вашей подписки Robonomics доступны в двух руководствах: через [Robonomics dapp](https://wiki.robonomics.network/docs/sub-activate/) с удобным интерфейсом пользователя или через [портал Robonomics Substrate](https://wiki.robonomics.network/docs/get-subscription/).

Параметр `ipfs_gateway` позволяет вам указать шлюз, через который будут загружаться файлы IPFS. Это могут быть как [публичные шлюзы](https://ipfs.github.io/public-gateway-checker/), так и специализированные частные (например, полученные на Pinata)